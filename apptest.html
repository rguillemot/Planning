<html>
<head>
</head>
<body onload="">
	<form method="POST" name="myform" action="/messages">
		<input name="firstName" value="harry" />
		<input name="lastName" value="tester" />
		<input name="toEmail" value="testtest@test.com" />
		<input type="submit" value="Submit the form!">
	</form>
	<script type="text/javascript">
		var form = document.myform 
		test = function() {
			console.log('Bonjour');
		}

		form.onsubmit = function (e) {
  			// stop the regular form submission
  			e.preventDefault();

  			// collect the form data while iterating over the inputs
  			var data = {};
  			for (var i = 0, ii = form.length; i < ii; ++i) {
    				var input = form[i];
    				if (input.name) {
      					data[input.name] = input.value;
    				}
  			}

  			// construct an HTTP request
  			var xhr = new XMLHttpRequest();
  			xhr.open('POST', form.action);
  			xhr.setRequestHeader('Content-Type', 'application/json');

  			// send the collected data as JSON
  			xhr.send(JSON.stringify(data));

  			xhr.onloadend = function () {
				a = 12;
    			// done
  			};
		};
	</script>

</body>
<html>
